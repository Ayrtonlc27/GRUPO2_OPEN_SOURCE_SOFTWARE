<div class="alertas-container">  
    <h2>Gesti√≥n de Alertas</h2>  
  
    <div *ngIf="cargando" class="cargando">  
      <mat-spinner></mat-spinner>  
    </div>  
  
    <div *ngIf="error" class="error-mensaje">  
      {{ error }}  
    </div>  
  
    <table mat-table [dataSource]="alertas" class="mat-elevation-z8">  
      <ng-container matColumnDef="id">  
        <th mat-header-cell *matHeaderCellDef>ID</th>  
        <td mat-cell *matCellDef="let alerta">{{ alerta.id }}</td>  
      </ng-container>  
  
      <ng-container matColumnDef="medicamento">  
        <th mat-header-cell *matHeaderCellDef>Medicamento</th>  
        <td mat-cell *matCellDef="let alerta">{{ alerta.nombre_medicamento }}</td>  
      </ng-container>  
  
      <ng-container matColumnDef="tipoAlerta">  
        <th mat-header-cell *matHeaderCellDef>Tipo de Alerta</th>  
        <td mat-cell *matCellDef="let alerta">{{ alerta.tipo_alerta }}</td>  
      </ng-container>  
  
      <ng-container matColumnDef="mensaje">  
        <th mat-header-cell *matHeaderCellDef>Mensaje</th>  
        <td mat-cell *matCellDef="let alerta">{{ alerta.mensaje }}</td>  
      </ng-container>  
  
      <ng-container matColumnDef="fechaGenerada">  
        <th mat-header-cell *matHeaderCellDef>Fecha Generada</th>  
        <td mat-cell *matCellDef="let alerta">  
          {{ alerta.fecha_generada | date:'dd/MM/yyyy HH:mm' }}  
        </td>  
      </ng-container>  
  
      <ng-container matColumnDef="estado">  
        <th mat-header-cell *matHeaderCellDef>Estado</th>  
        <td mat-cell *matCellDef="let alerta">  
          <mat-chip-listbox>  
            <mat-chip   
              [color]="getColorEstado(alerta.estado)"   
              selected>  
              {{ alerta.estado }}  
            </mat-chip>  
          </mat-chip-listbox>  
        </td>  
      </ng-container>  
  
      <ng-container matColumnDef="acciones">  
        <th mat-header-cell *matHeaderCellDef>Acciones</th>  
        <td mat-cell *matCellDef="let alerta">  
          <button   
            mat-icon-button   
            color="primary"   
            (click)="editarAlerta(alerta)">  
            <mat-icon>edit</mat-icon>  
          </button>  
          <button   
            mat-icon-button   
            color="warn"   
            (click)="eliminarAlerta(alerta.id)">  
            <mat-icon>delete</mat-icon>  
          </button>  
          <mat-menu #estadoMenu="matMenu">  
            <button   
              mat-menu-item   
              (click)="cambiarEstadoAlerta(alerta.id, 'Activo')">  
              Activo  
            </button>  
            <button   
              mat-menu-item   
              (click)="cambiarEstadoAlerta(alerta.id, 'Pendiente')">  
              Pendiente  
            </button>  
            <button   
              mat-menu-item   
              (click)="cambiarEstadoAlerta(alerta.id, 'Resuelto')">  
              Resuelto  
            </button>  
          </mat-menu>  
          <button   
            mat-icon-button   
            [matMenuTriggerFor]="estadoMenu">  
            <mat-icon>more_vert</mat-icon>  
          </button>  
        </td>  
      </ng-container>  
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>  
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>  
    </table>  
  </div>  